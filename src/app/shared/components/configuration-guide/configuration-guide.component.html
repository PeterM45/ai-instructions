<section
  class="bg-gradient-to-r from-slate-800/60 to-slate-700/60 backdrop-blur-sm border border-slate-600/50 rounded-2xl mb-12 overflow-hidden"
>
  <!-- Collapsible Header -->
  <button
    (click)="toggleExpanded()"
    class="w-full text-left p-6 hover:bg-slate-800/40 transition-colors duration-200 flex items-center justify-between"
  >
    <div>
      <h2 class="text-2xl font-bold text-slate-100 mb-2">How to use?</h2>
      <p class="text-slate-300 text-sm">
        Learn how to configure your AI assistant with these instructions
      </p>
    </div>
    <div class="ml-4 text-slate-400">
      @if (isExpanded()) {
      <lucide-icon [img]="ChevronUp" size="24"></lucide-icon>
      } @else {
      <lucide-icon [img]="ChevronDown" size="24"></lucide-icon>
      }
    </div>
  </button>

  <!-- Collapsible Content -->
  @if (isExpanded()) {
  <div class="px-6 pb-8 border-t border-slate-600/50">
    <div class="pt-6">
      <p
        class="text-slate-300 max-w-4xl mx-auto text-lg leading-relaxed text-center mb-8"
      >
        Choose your preferred AI tool and follow the simple steps to integrate
        these coding instructions. Each method provides context-aware AI
        assistance tailored to your development environment.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      @for (step of configurationSteps; track step.id) {
      <div
        class="bg-slate-800/40 rounded-xl p-6 border border-slate-600/50 hover:border-slate-500/70 hover:bg-slate-800/60 transition-all duration-300"
      >
        <div class="text-center mb-6">
          <div class="bg-primary-600/20 rounded-2xl p-4 mx-auto w-fit mb-4">
            @if (typeof step.icon === 'string') {
            <img
              [src]="step.icon"
              [alt]="step.title + ' logo'"
              class="w-8 h-8 mx-auto"
              loading="lazy"
              aria-hidden="true"
            />
            } @else if (step.icon) {
            <img
              [src]="getIconDataUrl(step.icon)"
              [alt]="step.title + ' logo'"
              class="w-8 h-8 mx-auto"
              loading="lazy"
              aria-hidden="true"
            />
            } @else {
            <lucide-icon
              [img]="step.icon"
              class="w-8 h-8 text-primary-400"
              aria-hidden="true"
            ></lucide-icon>
            }
          </div>
          <h3 class="font-bold text-slate-100 text-lg mb-2">
            {{ step.title }}
          </h3>
          <p class="text-slate-400 text-sm leading-relaxed">
            {{ step.description }}
          </p>
        </div>

        <div class="space-y-3">
          @for (stepItem of step.steps; track $index) {
          <div class="flex items-start text-sm">
            <span
              class="bg-primary-600/20 text-primary-300 rounded-full w-6 h-6 flex items-center justify-center mr-3 mt-0.5 text-xs font-medium flex-shrink-0"
            >
              {{ $index + 1 }}
            </span>
            <span class="text-slate-400 leading-relaxed">{{ stepItem }}</span>
          </div>
          }
        </div>
      </div>
      }
    </div>

    <div class="mt-8 text-center">
      <p class="text-slate-400 text-sm">
        Need help getting started? Check out our
        <a
          href="https://github.com/PeterM45/ai-instructions#readme"
          target="_blank"
          rel="noopener noreferrer"
          class="text-primary-400 hover:text-primary-300 underline"
        >
          detailed setup guide
        </a>
      </p>
    </div>
  </div>
  }
</section>
